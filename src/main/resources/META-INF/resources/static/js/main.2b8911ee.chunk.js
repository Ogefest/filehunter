(this["webpackJsonpfilehunter-front"]=this["webpackJsonpfilehunter-front"]||[]).push([[0],{24:function(e,t,s){},25:function(e,t,s){},38:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(17),r=s.n(a),i=(s(24),s(25),s(26),s(14)),l=s(6),o=s(2),h=s(3),d=s(5),j=s(4),b=s(10),u=s(0),m=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={clicked:!1},n.handleClick=n.handleClick.bind(Object(b.a)(n)),n}return Object(h.a)(s,[{key:"handleClick",value:function(){var e=this;if(1!=this.state.clicked)return fetch("".concat("","/directory/reindex"),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(t){e.setState({clicked:!0})})),!1}},{key:"render",value:function(){return console.log(this.state.clicked),Object(u.jsxs)("button",{class:"btn btn-sm btn-success",href:"#",onClick:this.handleClick,children:[Object(u.jsx)("i",{class:"bi bi-arrow-repeat"})," Reindex"]})}}]),s}(c.a.Component),x=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(u.jsx)("nav",{class:"navbar navbar-expand-lg navbar-light",children:Object(u.jsxs)("div",{class:"container-fluid",children:[Object(u.jsx)("a",{class:"navbar-brand",href:"/",children:"Filehunter"}),Object(u.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{class:"navbar-toggler-icon"})}),Object(u.jsxs)("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(u.jsxs)("ul",{class:"navbar-nav mx-auto mb-2 mb-lg-0",children:[Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{class:"nav-link","aria-current":"page",href:"/",children:[Object(u.jsx)("i",{class:"bi bi-search"})," Search"]})}),Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{href:"/gui/directory",class:"nav-link menu-item nav-active",children:[Object(u.jsx)("i",{class:"bi bi-folder2-open"})," Directories"]})}),Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{rel:"noreferrer",href:"".concat("","/api-doc"),target:"_blank",class:"nav-link menu-item",children:[Object(u.jsx)("i",{class:"bi bi-code-slash"})," API Doc"]})}),Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{rel:"noreferrer",href:"https://github.com/Ogefest/filehunter",target:"_blank",class:"nav-link  menu-item",children:[Object(u.jsx)("i",{class:"bi bi-github"})," Github"]})})]}),Object(u.jsx)(m,{})]})]})})}}]),s}(c.a.Component),O=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){var e="bi-file-earmark";return"d"===this.props.params.type&&(e="bi-folder2"),Object(u.jsx)("div",{class:"row mb-3",children:Object(u.jsxs)("div",{class:"col-8 offset-3",children:[Object(u.jsxs)("h5",{children:[Object(u.jsx)("i",{class:"bi ".concat(e)})," ",Object(u.jsx)("a",{rel:"noreferrer",target:"_blank",href:"".concat("","/download/").concat(this.props.params.uuid),children:this.props.params.name})]}),Object(u.jsx)("small",{class:"text-success",children:this.props.params.path})]})},this.props.params.uuid)}}]),s}(c.a.Component),p=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{class:"container",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsx)("div",{class:"col-4 offset-4",children:Object(u.jsx)("div",{class:"alert alert-danger col-md-12 col-md-offset-12",align:"center",children:"Empty search results"})})},"empty-results")})}}]),s}(c.a.Component),f=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={value:null,searchResultRows:[]},n.sr=[],n.lastQuery="",n.currentQuery="",n.activeQuery=!1,n.searchTimeout=null,n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"handleSearch",value:function(){var e=this;""!==this.currentQuery&&this.currentQuery!==this.lastQuery&&!0!==this.activeQuery&&(this.activeQuery=!0,fetch("".concat("","/search?q=").concat(encodeURIComponent(this.currentQuery))).then((function(e){return e.json()})).then((function(t){e.lastQuery=e.currentQuery,e.activeQuery=!1,e.sr=[],t.map((function(t){return e.sr.push(Object(u.jsx)(O,{params:t}))})),0===e.sr.length&&e.sr.push(Object(u.jsx)(p,{})),e.setState({searchResultRows:e.sr})})))}},{key:"handleInputChange",value:function(e){this.currentQuery=e.target.value,null!=this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(this.handleSearch.bind(this),300)}},{key:"render",value:function(){return Object(u.jsxs)("div",{class:"container mt-5",children:[Object(u.jsx)("div",{class:"row",children:Object(u.jsx)("div",{class:"col-6 offset-3",children:Object(u.jsx)("div",{class:"input-group mb-3",children:Object(u.jsx)("input",{autoFocus:!0,type:"text",class:"form-control",placeholder:"Search for files","aria-label":"Search for files","aria-describedby":"button-addon2",onChange:this.handleInputChange.bind(this)})})})}),Object(u.jsx)("div",{class:"row",children:this.state.searchResultRows})]})}}]),s}(c.a.Component),v=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).result=[],n.handleRemove=n.handleRemove.bind(Object(b.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.refreshList()}},{key:"refreshList",value:function(){var e=this;fetch("".concat("","/directory/list")).then((function(e){return e.json()})).then((function(t){e.result=t,e.setState({})}))}},{key:"handleRemove",value:function(e){var t=this;return window.confirm("Are you sure?")&&fetch("".concat("","/directory/remove/").concat(e.name),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t.result=e,t.setState({})})),!1}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{class:"container mt-5",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-10 offset-1",children:[Object(u.jsxs)("h3",{children:["List of directories ",Object(u.jsxs)("a",{href:"/gui/directory/create",class:"btn btn-success btn-sm",children:[Object(u.jsx)("i",{class:"bi bi-plus"})," New"]})," ",Object(u.jsx)(m,{})]}),Object(u.jsxs)("table",{class:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Paths"}),Object(u.jsx)("th",{children:"Ignore"}),Object(u.jsx)("th",{children:"Last indexed"}),Object(u.jsx)("th",{children:"\xa0"})]})}),Object(u.jsx)("tbody",{children:this.result.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[Object(u.jsx)("i",{class:"bi bi-folder2-open"})," ",t.name]}),Object(u.jsx)("td",{children:t.path.map((function(e){return Object(u.jsx)("small",{class:"badge bg-primary ms-1",children:e})}))}),Object(u.jsxs)("td",{children:[t.ignorePath.map((function(e){return Object(u.jsx)("small",{class:"badge bg-secondary ms-1",children:e})})),t.ignorePhrase.map((function(e){return Object(u.jsxs)("small",{class:"badge bg-secondary ms-1",children:["*",e,"*"]})})),t.ignoreExtension.map((function(e){return Object(u.jsxs)("small",{class:"badge bg-secondary ms-1",children:["*.",e]})}))]}),Object(u.jsxs)("td",{children:[new Date(t.lastStructureIndexed).toLocaleDateString(),"\xa0",new Date(t.lastStructureIndexed).toLocaleTimeString()]}),Object(u.jsxs)("td",{children:[Object(u.jsx)("a",{href:"/gui/directory/edit/".concat(t.name),class:"btn btn-light btn-sm me-1",children:Object(u.jsx)("i",{class:"bi bi-pencil"})}),Object(u.jsx)("a",{onClick:function(){return e.handleRemove(t)},href:"#",class:"btn btn-danger btn-sm me-1",children:Object(u.jsx)("i",{class:"bi bi-trash"})})]})]})}))})]})]})})})}}]),s}(c.a.Component),g=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={formData:{extractMetadata:!0,hashSize:0,ignoreExtension:[],ignorePath:[],ignorePhrase:[],indexMode:"full",intervalUpdateMetadata:3600,intervalUpdateStructure:7200,maxDepth:20,name:"",path:[]}},n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleFormEdit=n.handleFormEdit.bind(Object(b.a)(n)),n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.name;void 0!=t&&fetch("".concat("","/directory/get/").concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({formData:t})}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),fetch("".concat("","/directory/set"),{method:"POST",body:JSON.stringify(this.state.formData),headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),window.location="/gui/directory"}))}},{key:"handleFormEdit",value:function(e){if("change"===e.type){var t=this.state.formData;switch(e.target.id){case"inputName":t.name=e.target.value.replace(/[^a-z0-9\-]+/gi,"");break;case"inputPath":t.path=e.target.value.split(",");break;case"inputPathIgnore":t.ignorePath=e.target.value.split(",");break;case"inputPhraseIgnore":t.ignorePhrase=e.target.value.split(",");break;case"inputExtIgnore":t.ignoreExtension=e.target.value.split(",")}this.setState({formData:t})}}},{key:"render",value:function(){var e=!0;return void 0===this.props.match.params.name&&(e=!1),Object(u.jsx)("div",{class:"container mt-5",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-10 offset-1",children:[Object(u.jsxs)("h3",{children:[e?"Edit":"Create"," directory"]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputName",class:"col-sm-3 col-form-label",children:"Index name"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.name,onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputName"})}),Object(u.jsx)("div",{class:"col-sm-4"})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"Path to index"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.path.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputPath"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Full path to index, you can add here multiple paths separate them with coma ",Object(u.jsx)("br",{}),"eg. (/home/user/dir1,/home/user/dir2)"]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPathIgnore",class:"col-sm-3 col-form-label",children:"Ignore path"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignorePath.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputPathIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore paths from indexing separated by coma ",Object(u.jsx)("br",{}),"eg. (/home/user/dir1/unwanted-path,/home/user/dir2/some/unwanted)"]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPhraseIgnore",class:"col-sm-3 col-form-label",children:"Ignore phrase"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignorePhrase.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputPhraseIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore file/directory paths with phrase separated by coma. You can use * to match more files/directories ",Object(u.jsx)("br",{}),"eg. (.git,vendor,attr*)"]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputExtIgnore",class:"col-sm-3 col-form-label",children:"Ignore extensions"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignoreExtension.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputExtIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore file extensions separated by coma ",Object(u.jsx)("br",{}),"eg. (jpg,mp4,tmp)"]})})]}),Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-3 offset-6",children:[Object(u.jsx)("a",{href:"/gui/directory",class:"btn btn-link",children:"Cancel"}),Object(u.jsx)("button",{type:"submit",class:"btn btn-primary float-right",children:"Save"})]})})]})]})})})}}]),s}(c.a.Component),y=Object(l.g)(g);var k=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("header",{children:Object(u.jsx)(x,{})}),Object(u.jsx)("main",{class:"flex-shrink-2",children:Object(u.jsx)(i.a,{children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{exact:!0,path:"/",children:Object(u.jsx)(l.a,{to:"/gui/"})}),Object(u.jsx)(l.b,{exact:!0,path:"/gui/",children:Object(u.jsx)(f,{})}),Object(u.jsx)(l.b,{exact:!0,path:"/gui/directory",children:Object(u.jsx)(v,{})}),Object(u.jsx)(l.b,{path:"/gui/directory/edit/:name",children:Object(u.jsx)(y,{})}),Object(u.jsx)(l.b,{path:"/gui/directory/create",children:Object(u.jsx)(y,{})})]})})})]})},C=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,41)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))};s(37),s(36);r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.2b8911ee.chunk.js.map