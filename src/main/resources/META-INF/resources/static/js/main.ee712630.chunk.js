(this["webpackJsonpfilehunter-front"]=this["webpackJsonpfilehunter-front"]||[]).push([[0],{118:function(e,t,s){},119:function(e,t,s){},278:function(e,t,s){"use strict";s.r(t);var a=s(1),i=s.n(a),n=s(111),r=s.n(n),c=(s(118),s(2)),l=s(3),o=s(7),d=s(5),h=s(4),b=(s(119),s(120),s(21)),j=s(8),u=s(0),m=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).currentQuery="",a.currentInputQueryValue="",a.inputQueryRef=i.a.createRef(),a.handleChangeInput=a.handleChangeInput.bind(Object(o.a)(a)),a.handleItemSearch=a.props.handleItemSearch.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.setCallbackClearInputQuery((function(){e.inputQueryRef.current.value="",e.currentQuery="",e.setState({})}))}},{key:"handleChangeInput",value:function(e){if("/gui/"!=this.props.history.location.pathname&&this.props.history.push("/gui/"),this.currentQuery=e.target.value,0==this.currentQuery.trim().length&&(this.filters={}),!0===this.activeQuery)return null!==this.updateQueryWhenActive&&clearInterval(this.updateQueryWhenActive),void(this.updateQueryWhenActive=setTimeout(this.queryBackend(),500));this.handleItemSearch(this.currentQuery)}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("nav",{class:"navbar navbar-expand-lg navbar-light fixed-top bg-light",children:Object(u.jsxs)("div",{class:"container-fluid",children:[Object(u.jsx)("span",{class:"badge bg-primary",children:"FH"})," ",Object(u.jsx)(b.b,{className:"navbar-brand",to:"/gui/",children:"FileHunter"}),Object(u.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{class:"navbar-toggler-icon"})}),Object(u.jsxs)("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(u.jsx)("form",{class:"d-flex flex-grow-1 me-5 ms-5",children:Object(u.jsx)("input",{ref:this.inputQueryRef,onChange:this.handleChangeInput,class:"form-control me-3",type:"search",placeholder:"Search","aria-label":"Search"})}),Object(u.jsxs)("ul",{class:"navbar-nav ms-auto mb-1 mb-lg-0",children:[Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)(b.b,{className:"nav-link menu-item nav-active",to:"/gui/index",children:[Object(u.jsx)("i",{class:"bi bi-folder2-open"})," Indexes"]})}),Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{rel:"noreferrer",href:"".concat("","/api-doc"),target:"_blank",class:"nav-link menu-item",children:[Object(u.jsx)("i",{class:"bi bi-code-slash"})," API Doc"]})}),Object(u.jsx)("li",{class:"nav-item",children:Object(u.jsxs)("a",{rel:"noreferrer",href:"https://github.com/Ogefest/filehunter",target:"_blank",class:"nav-link  menu-item",children:[Object(u.jsx)("i",{class:"bi bi-github"})," Github"]})})]})]})]})}),Object(u.jsx)("br",{})]})}}]),s}(i.a.Component),p=Object(j.g)(m),x=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),a=t.call(this,e),console.log(e),a.state={clicked:!1},a.handleClick=a.handleClick.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleClick",value:function(){var e=this;if(!0!==this.state.clicked)return fetch("".concat("","/index/reindex/").concat(this.props.indextype),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(t){e.setState({clicked:!0})})),!1}},{key:"render",value:function(){return Object(u.jsx)("button",{"data-placement":"top",title:"Reindex",class:"btn btn-sm btn-success",href:"#",onClick:this.handleClick,children:Object(u.jsx)("i",{class:"bi bi-arrow-repeat"})})}}]),s}(i.a.Component),f=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{class:"container mt-5",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-6 offset-3",children:[Object(u.jsx)("div",{class:"alert alert-info col-md-12 col-md-offset-12",align:"center",children:"You have no indexed directories. Click button below to add directory."}),Object(u.jsx)("div",{align:"center",children:Object(u.jsxs)("a",{href:"/gui/index/create",class:"btn btn-lg btn-primary",children:[Object(u.jsx)("i",{class:"bi bi-plus"})," Create new index"]})})]})},"empty-results")})}}]),s}(i.a.Component),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={result:[]},a.result=[],a.requestFinished=!1,a.handleRemove=a.handleRemove.bind(Object(o.a)(a)),a.refreshList=a.refreshList.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.refreshList(),setInterval((function(){e.refreshList()}),5e3)}},{key:"refreshList",value:function(){var e=this;fetch("".concat("","/index/list")).then((function(e){return e.json()})).then((function(t){e.requestFinished=!0,e.setState({result:t})}))}},{key:"handleRemove",value:function(e){var t=this;return window.confirm("Are you sure?")&&fetch("".concat("","/index/remove/").concat(e.name),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t.setState({result:e})})),!1}},{key:"render",value:function(){var e=this;return!1===this.requestFinished?"":null===this.state||0===this.state.result.length?Object(u.jsx)(f,{}):Object(u.jsx)("div",{class:"container mt-5",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-10 offset-1",children:[Object(u.jsxs)("h3",{children:["List of indexes ",Object(u.jsxs)("a",{href:"/gui/index/create",class:"btn btn-success btn-sm",children:[Object(u.jsx)("i",{class:"bi bi-plus"})," New"]})]}),Object(u.jsxs)("table",{class:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Type"}),Object(u.jsx)("th",{children:"Status"}),Object(u.jsx)("th",{children:"Ignore"}),Object(u.jsx)("th",{children:"Last indexed"}),Object(u.jsx)("th",{children:"\xa0"})]})}),Object(u.jsx)("tbody",{children:this.state.result.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[Object(u.jsx)("i",{class:"bi bi-folder2-open"})," ",t.name]}),Object(u.jsx)("td",{children:Object(u.jsx)("small",{class:"badge bg-primary ms-1",children:t.type})}),Object(u.jsx)("td",{children:t.status}),Object(u.jsxs)("td",{children:[t.ignorePath.map((function(e){return Object(u.jsx)("small",{class:"badge bg-secondary ms-1",children:e})})),t.ignorePhrase.map((function(e){return Object(u.jsxs)("small",{class:"badge bg-secondary ms-1",children:["*",e,"*"]})})),t.ignoreExtension.map((function(e){return Object(u.jsxs)("small",{class:"badge bg-secondary ms-1",children:["*.",e]})}))]}),Object(u.jsxs)("td",{children:[new Date(t.lastStructureIndexed).toLocaleDateString(),"\xa0",new Date(t.lastStructureIndexed).toLocaleTimeString()]}),Object(u.jsxs)("td",{children:[Object(u.jsx)("a",{"data-placement":"top",title:"Edit",href:"/gui/index/edit/".concat(t.name),class:"btn btn-light btn-sm me-1",children:Object(u.jsx)("i",{class:"bi bi-pencil"})}),Object(u.jsx)("a",{"data-placement":"top",title:"Remove",onClick:function(){return e.handleRemove(t)},href:"#",class:"btn btn-danger btn-sm me-1",children:Object(u.jsx)("i",{class:"bi bi-trash"})}),Object(u.jsx)(x,{indextype:t.name})]})]})}))})]})]})})})}}]),s}(i.a.Component),v=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleFormEdit",value:function(e){this.props.handleSetConfiguration("path",e.target.value)}},{key:"render",value:function(){return Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"Path"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFilesystemPath",onChange:this.handleFormEdit,value:this.props.formData.configuration.path})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Full path to index eg: /home/user/dir1"})})]})}}]),s}(i.a.Component),g=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleFormEdit",value:function(e){var t=e.target.value,s="";switch(e.target.id){case"inputWebDavUrl":s="url";break;case"inputWebDavUsername":s="username";break;case"inputWebDavPassword":s="password"}this.props.handleSetConfiguration(s,t)}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"WebDav URL"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputWebDavUrl",onChange:this.handleFormEdit,value:this.props.formData.configuration.url})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"WebDav username"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputWebDavUsername",onChange:this.handleFormEdit,value:this.props.formData.configuration.username})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"WebDav password"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{type:"password",class:"form-control",id:"inputWebDavPassword",onChange:this.handleFormEdit,value:this.props.formData.configuration.password})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]})]})}}]),s}(i.a.Component),y=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleFormEdit",value:function(e){var t=e.target.value,s="";switch(e.target.id){case"inputS3Endpoint":s="endpoint";break;case"inputS3Region":s="region";break;case"inputS3Bucket":s="bucket";break;case"inputS3Accesskey":s="accesskey";break;case"inputS3Secretkey":s="secretkey"}this.props.handleSetConfiguration(s,t)}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"S3 endpoint"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputS3Endpoint",onChange:this.handleFormEdit,value:this.props.formData.configuration.endpoint})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"S3 region"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputS3Region",onChange:this.handleFormEdit,value:this.props.formData.configuration.region})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"S3 bucket"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputS3Bucket",onChange:this.handleFormEdit,value:this.props.formData.configuration.bucket})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"S3 accesskey"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputS3Accesskey",onChange:this.handleFormEdit,value:this.props.formData.configuration.accesskey})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"S3 secretkey"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{type:"password",class:"form-control",id:"inputS3Secretkey",onChange:this.handleFormEdit,value:this.props.formData.configuration.secretkey})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]})]})}}]),s}(i.a.Component),k=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleFormEdit",value:function(e){var t=e.target.value,s="";switch(e.target.id){case"inputFtpHost":s="host";break;case"inputFtpPort":s="port";break;case"inputFtpUsername":s="username";break;case"inputFtpPassword":s="password";break;case"inputFtpPath":s="path"}this.props.handleSetConfiguration(s,t)}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"FTP host"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFtpHost",onChange:this.handleFormEdit,value:this.props.formData.configuration.host})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"FTP port"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{type:"number",class:"form-control",id:"inputFtpPort",onChange:this.handleFormEdit,value:this.props.formData.configuration.port})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"FTP username"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFtpUsername",onChange:this.handleFormEdit,value:this.props.formData.configuration.username})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"FTP password"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{type:"password",class:"form-control",id:"inputFtpPassword",onChange:this.handleFormEdit,value:this.props.formData.configuration.password})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"FTP path"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFtpPath",onChange:this.handleFormEdit,value:this.props.formData.configuration.path})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted"})})]})]})}}]),s}(i.a.Component),C=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleFormEdit",value:function(e){var t=e.target.value,s="";switch(e.target.id){case"inputFilesystemHost":s="host";break;case"inputFilesystemPath":s="path"}this.props.handleSetConfiguration(s,t)}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"Host"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFilesystemHost",onChange:this.handleFormEdit,value:this.props.formData.configuration.host})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Host with NFS Server, eg: 192.168.2.52"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPath",class:"col-sm-3 col-form-label",children:"Path"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{class:"form-control",id:"inputFilesystemPath",onChange:this.handleFormEdit,value:this.props.formData.configuration.path})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Full path to index eg: /some/share/dir1"})})]})]})}}]),s}(i.a.Component),w=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={formData:{extractMetadata:!0,ignoreExtension:[],ignorePath:[],ignorePhrase:[],indexMode:"full",intervalUpdateMetadata:3600,name:"",path:[],type:"",configuration:{}}},a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.handleFormEdit=a.handleFormEdit.bind(Object(o.a)(a)),a.handleSetConfiguration=a.handleSetConfiguration.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.name;void 0!==t&&fetch("".concat("","/index/get/").concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({formData:t})}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),fetch("".concat("","/index/set"),{method:"POST",body:JSON.stringify(this.state.formData),headers:{"Content-Type":"application/json"}}).then((function(e){window.location="/gui/index"}))}},{key:"handleSetConfiguration",value:function(e,t){var s=this.state.formData;s.configuration[e]=t,this.setState({formData:s})}},{key:"handleFormEdit",value:function(e){if("change"===e.type){var t=this.state.formData;switch(e.target.id){case"inputName":t.name=e.target.value.replace(/[^a-z0-9\-]+/gi,"");break;case"inputPath":t.path=e.target.value.split(",");break;case"inputPathIgnore":t.ignorePath=e.target.value.split(",");break;case"inputPhraseIgnore":t.ignorePhrase=e.target.value.split(",");break;case"inputExtIgnore":t.ignoreExtension=e.target.value.split(",");break;case"inputUpdateStructure":t.intervalUpdateStructure=e.target.value.replace(/[^0-9]+/gi,"");break;case"inputExtractMetadata":t.extractMetadata=e.target.checked;break;case"indexType":t.type=e.target.value;break;case"inputIndexConfiguration":t.configuration=e.target.value;break;case"reindexStrategy":t.reindexType=e.target.value,"ON_DEMAND"==t.reindexType?t.intervalUpdateStructure=0:t.intervalUpdateStructure=3600}this.setState({formData:t})}}},{key:"render",value:function(){var e=!0;void 0===this.props.match.params.name&&(e=!1);var t=e?"readOnly":"",s=null;return"filesystem"==this.state.formData.type?s=Object(u.jsx)(v,{formData:this.state.formData,handleSetConfiguration:this.handleSetConfiguration}):"webdav"==this.state.formData.type?s=Object(u.jsx)(g,{formData:this.state.formData,handleSetConfiguration:this.handleSetConfiguration}):"s3"==this.state.formData.type?s=Object(u.jsx)(y,{formData:this.state.formData,handleSetConfiguration:this.handleSetConfiguration}):"ftp"==this.state.formData.type?s=Object(u.jsx)(k,{formData:this.state.formData,handleSetConfiguration:this.handleSetConfiguration}):"nfs"==this.state.formData.type&&(s=Object(u.jsx)(C,{formData:this.state.formData,handleSetConfiguration:this.handleSetConfiguration})),Object(u.jsx)("div",{class:"container mt-5",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-10 offset-1",children:[Object(u.jsxs)("h1",{children:[e?"Edit":"Create"," index"]}),Object(u.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputName",class:"col-sm-3 col-form-label",children:"Index name"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{readOnly:t,required:!0,value:this.state.formData.name,onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputName"})}),Object(u.jsx)("div",{class:"col-sm-4"})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputIndexType",class:"col-sm-3 col-form-label",children:"Index type"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsxs)("select",{required:!0,onChange:this.handleFormEdit,class:"form-select","aria-label":"Index type",id:"indexType",children:[Object(u.jsx)("option",{}),Object(u.jsx)("option",{selected:"filesystem"===this.state.formData.type?"selected":"",value:"filesystem",children:"Filesystem"}),Object(u.jsx)("option",{selected:"s3"===this.state.formData.type?"selected":"",value:"s3",children:"S3"}),Object(u.jsx)("option",{selected:"webdav"===this.state.formData.type?"selected":"",value:"webdav",children:"WebDAV"}),Object(u.jsx)("option",{selected:"ftp"===this.state.formData.type?"selected":"",value:"ftp",children:"FTP"}),Object(u.jsx)("option",{selected:"nfs"===this.state.formData.type?"selected":"",value:"nfs",children:"NFS"})]})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Storage backend for access to your files."})})]}),s,Object(u.jsx)("h4",{children:"Filter settings"}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPathIgnore",class:"col-sm-3 col-form-label",children:"Ignore path"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignorePath.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputPathIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore paths from indexing separated by coma ",Object(u.jsx)("br",{}),"eg. (/home/user/dir1/unwanted-path,/home/user/dir2/some/unwanted)"]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputPhraseIgnore",class:"col-sm-3 col-form-label",children:"Ignore phrase"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignorePhrase.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputPhraseIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore file/directory paths with phrase separated by coma. You can use * to match more files/directories ",Object(u.jsx)("br",{}),"eg. (.git,vendor,attr*)"]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputExtIgnore",class:"col-sm-3 col-form-label",children:"Ignore extensions"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{value:this.state.formData.ignoreExtension.join(","),onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputExtIgnore"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsxs)("small",{class:"text-muted",children:["Ignore file extensions separated by coma ",Object(u.jsx)("br",{}),"eg. (jpg,mp4,tmp)"]})})]}),Object(u.jsx)("h4",{children:"Reindex settings"}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputIndexType",class:"col-sm-3 col-form-label",children:"Reindex strategy"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsxs)("select",{required:!0,onChange:this.handleFormEdit,class:"form-select","aria-label":"Reindex strategy",id:"reindexStrategy",children:[Object(u.jsx)("option",{selected:"RECURRING"===this.state.formData.type?"selected":"",value:"RECURRING",children:"Recurring"}),Object(u.jsx)("option",{selected:"ON_DEMAND"===this.state.formData.type?"selected":"",value:"ON_DEMAND",children:"On demand"})]})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Type of strategy for refresh your index."})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputUpdateStructure",class:"col-sm-3 col-form-label",children:"File structure interval"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{readOnly:"ON_DEMAND"==this.state.formData.reindexType,value:this.state.formData.intervalUpdateStructure,onChange:this.handleFormEdit,type:"text",class:"form-control",id:"inputUpdateStructure"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Refresh directory structure interval in seconds."})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("label",{for:"inputExtractMetadata",class:"col-sm-3 col-form-label",children:"Extract metadata from files"}),Object(u.jsx)("div",{class:"col-sm-5",children:Object(u.jsx)("input",{onChange:this.handleFormEdit,checked:this.state.formData.extractMetadata,type:"checkbox",class:"form-check-input",id:"inputExtractMetadata"})}),Object(u.jsx)("div",{class:"col-sm-4",children:Object(u.jsx)("small",{class:"text-muted",children:"Enable this option when Filehunter should extract metadata/content from files and make it searchable"})})]}),Object(u.jsx)("div",{class:"row",children:Object(u.jsxs)("div",{class:"col-3 offset-6",children:[Object(u.jsx)("a",{href:"/gui/index",class:"btn btn-link",children:"Cancel"}),Object(u.jsx)("button",{type:"submit",class:"btn btn-primary float-right",onClick:this.handleSubmit,children:"Save"})]})})]})]})})})}}]),s}(i.a.Component),P=Object(j.g)(w),F=s(6),I=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(u.jsx)("div",{class:"container",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsx)("div",{class:"col",children:Object(u.jsx)("div",{class:"alert alert-info col-md-12 col-md-offset-12",align:"center",children:"Nothing to listing"})})},"empty-results")})}}]),s}(i.a.Component),S=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleOpenDirectory=a.handleOpenDirectory.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleOpenDirectory",value:function(e){return e.preventDefault(),this.props.handleBrowse(e.target.attributes.path.value,this.props.index),!1}},{key:"render",value:function(){var e=this,t=[""];"/"!=this.props.path&&(t=this.props.path.split("/")),t=t.splice(1,t.length-2);var s=[],a="",i="";for(var n in t)""==t[n]||(a+="/"+t[n],i=t[n]),s.push({path:a,label:i});return Object(u.jsxs)("span",{class:"",children:[Object(u.jsx)("br",{}),s.map((function(t){return Object(u.jsx)("small",{children:Object(u.jsxs)("a",{class:"link-success nounderline",href:"#",path:t.path,onClick:e.handleOpenDirectory.bind(e),children:["/",t.label]})})}))]})}}]),s}(i.a.Component),D=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleItemClick=a.handleItemClick.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"humanFileSize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=t?1e3:1024;if(Math.abs(e)<a)return e+" B";var i=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],n=-1,r=Math.pow(10,s);do{e/=a,++n}while(Math.round(Math.abs(e)*r)/r>=a&&n<i.length-1);return e.toFixed(s)+" "+i[n]}},{key:"handleItemClick",value:function(e){e.preventDefault(),"f"===this.props.params.type&&"ONLINE"!=this.props.params.indexstatus.status||("f"==this.props.params.type?window.open("".concat("","/download/file?path=").concat(encodeURIComponent(this.props.params.path),"&index=").concat(this.props.params.index)):this.props.handleBrowse(this.props.params.path,this.props.params.index))}},{key:"handleGetIconClass",value:function(){if("d"===this.props.params.type)return"bi-folder2";var e={pdf:"bi-file-earmark-pdf",zip:"bi-file-earmark-zip",rar:"bi-file-earmark-zip",gz:"bi-file-earmark-zip","7z":"bi-file-earmark-zip",tar:"bi-file-earmark-zip",xz:"bi-file-earmark-zip",mp3:"bi-file-earmark-music",flac:"bi-file-earmark-music",wav:"bi-file-earmark-music",png:"bi-file-earmark-image",jpg:"bi-file-earmark-image",jpeg:"bi-file-earmark-image",tiff:"bi-file-earmark-image",gif:"bi-file-earmark-image",bmp:"bi-file-earmark-image",ods:"bi-file-earmark-excel",xls:"bi-file-earmark-excel",xlsx:"bi-file-earmark-excel",odt:"bi-file-earmark-word",doc:"bi-file-earmark-word",docx:"bi-file-earmark-word",txt:"bi-file-earmark-text",xml:"bi-file-earmark-code",json:"bi-file-earmark-code",c:"bi-file-earmark-code",cpp:"bi-file-earmark-code",php:"bi-file-earmark-code",py:"bi-file-earmark-code",rb:"bi-file-earmark-code",java:"bi-file-earmark-code",sh:"bi-file-earmark-code",csv:"bi-file-earmark-spreadsheet"};return void 0!==e[this.props.params.ext.toLowerCase()]?e[this.props.params.ext.toLowerCase()]:"bi-file-earmark"}},{key:"render",value:function(){var e=this.handleGetIconClass(),t=null;!0===this.props.searchResult&&(t=Object(u.jsx)("div",{children:Object(u.jsx)(S,{index:this.props.params.index,path:this.props.params.path,handleBrowse:this.props.handleBrowse})}));var s=this.humanFileSize(this.props.params.size);"d"===this.props.params.type&&(s="");var a="nounderline";return"f"===this.props.params.type&&"ONLINE"!=this.props.params.indexstatus.status&&(a="nounderline text-muted"),Object(u.jsxs)("div",{class:"list-group-item list-group-item-action","data-bs-toggle":"tooltip",title:this.props.params.name,children:[Object(u.jsx)("a",{href:"#",onClick:this.handleItemClick,class:"".concat(a),"aria-current":"true",children:Object(u.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(u.jsxs)("h6",{class:"mb-1 text-truncate text-primary fw-normal align-middle",children:[Object(u.jsx)("i",{class:"bi ".concat(e," text-success me-1"),style:{fontSize:"2rem"}}),this.props.params.name]}),Object(u.jsx)("small",{class:"text-success",children:this.props.params.index})]})}),Object(u.jsx)("div",{class:"float-end",children:Object(u.jsxs)("small",{class:"text-end",children:[s," ",this.props.params.lastModified]})}),t]})}}]),s}(i.a.Component),E=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleClick",value:function(e){var t=e.target.attributes.path.value;return""===t&&(t="/"),this.props.handleBrowse(t,this.props.index),!1}},{key:"render",value:function(){var e=this;if("-"===this.props.index)return"";var t=[""];"/"!==this.props.path&&(t=this.props.path.split("/"));var s=[],a="",i="";for(var n in t)""==t[n]?(a="",i=Object(u.jsx)("i",{class:"fs-5 bi bi-house",path:"/"})):(a+="/"+t[n],i=t[n]),s.push({path:a,label:i});return Object(u.jsx)("nav",{"aria-label":"breadcrumb",children:Object(u.jsx)("ol",{class:"breadcrumb",children:s.map((function(t){return Object(u.jsx)("li",{class:"fs-5 breadcrumb-item ",children:Object(u.jsx)("a",{class:"nounderline link-secondary",href:"#",path:t.path,onClick:e.handleClick.bind(e),children:t.label})})}))})})}}]),s}(i.a.Component),B=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleBrowse=a.handleBrowse.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleBrowse",value:function(e,t){this.props.handleBrowse(e,t)}},{key:"render",value:function(){var e=this;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h6",{class:"text-center",children:"Indexes"}),Object(u.jsx)("div",{class:"list-group list-group-flush",children:this.props.availableIndexes.map((function(t){return Object(u.jsx)("a",{class:"list-group-item list-group-item-action",href:"#",path:"/",index:t.name,onClick:function(){e.handleBrowse("/",t.name)},children:Object(u.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(u.jsxs)("h6",{class:"mb-1",children:[Object(u.jsx)("i",{class:"bi bi-folder2"})," ",Object(u.jsx)("span",{class:"link-primary",children:t.name})]}),Object(u.jsx)("span",{class:"badge bg-secondary rounded-pill",children:"ONLINE"!==t.status?"offline":""})]})})}))})]})}}]),s}(i.a.Component),N=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).indexList=[],a.indexName="",a.extension="",a.minmultiplier=1048576,a.maxmultiplier=1048576,a.filters={minsize:0,maxsize:0},a.props.filters.length>0&&(a.filters=a.props.filters),a.state={filters:a.filters},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("","/index/list")).then((function(e){return e.json()})).then((function(t){e.indexList=t,e.requestFinished=!0,e.setState({filters:e.filters})}))}},{key:"handleAdvancedFilterChange",value:function(e){var t=e.target.name,s=e.target.value;0==s.trim().length?delete this.filters[t]:("modified_after"!==t&&"modified_before"!==t||(s=Date.parse(s)),this.filters[t]=s),"maxsize"===t&&"0"!=s&&(this.filters[t]=parseInt(s)*this.maxmultiplier),"minsize"===t&&"0"!=s&&(this.filters[t]=parseInt(s)*this.minmultiplier);var a=!1,i=!1;0==this.filters.maxsize&&(delete this.filters.maxsize,i=!0),0==this.filters.minsize&&(delete this.filters.minsize,a=!0),this.props.update(this.filters),i&&(this.filters.maxsize=0),a&&(this.filters.minsize=0),this.setState({filters:this.filters})}},{key:"handleUiHelper",value:function(e){"maxmultiplier"===e.target.name&&(this.maxmultiplier=parseInt(e.target.value)),"minmultiplier"===e.target.name&&(this.minmultiplier=parseInt(e.target.value)),"maxsizerange"===e.target.name&&(this.filters.maxsize=parseInt(e.target.value)*this.maxmultiplier),"minsizerange"===e.target.name&&(this.filters.minsize=parseInt(e.target.value)*this.minmultiplier),this.props.update(this.filters),this.setState({filters:this.filters})}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{class:"row mb-3",id:"",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"col-form-label",for:"selectIndexname",children:"Index"})}),Object(u.jsx)("div",{class:"col-md-6 col-lg-8",children:Object(u.jsxs)("select",{onChange:this.handleAdvancedFilterChange.bind(this),name:"indexname",id:"selectIndexname",class:"form-select form-select-sm","aria-label":"Index name",children:[Object(u.jsx)("option",{}),this.indexList.map((function(e){return Object(u.jsx)("option",{value:e.name,children:e.name})}))]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputExtension",children:"Extension"})}),Object(u.jsx)("div",{class:"col-md-6 col-lg-8",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),id:"inputExtension",name:"ext",type:"text",class:"form-control form-control-sm","aria-label":"extension","aria-describedby":"extension"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputFilename",children:"File name"})}),Object(u.jsx)("div",{class:"col-md-6 col-lg-8",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),id:"inputFilename",name:"name",type:"text",class:"form-control form-control-sm","aria-label":"filename","aria-describedby":"filename"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputPathname",children:"Path name"})}),Object(u.jsx)("div",{class:"col-md-6 col-lg-8",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),id:"inputPathname",name:"path",type:"text",class:"form-control form-control-sm","aria-label":"path name","aria-describedby":"path name"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputContent",children:"File contains"})}),Object(u.jsx)("div",{class:"col-md-6 col-lg-8",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),id:"inputContent",name:"content",type:"text",class:"form-control form-control-sm","aria-label":"path name","aria-describedby":"path name"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputModified",children:"Modified between"})}),Object(u.jsx)("div",{class:"col-md-3 col-lg-4",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),name:"modified_after",type:"date",class:"form-control form-control-sm","aria-label":"modified between","aria-describedby":"modified between"})}),Object(u.jsx)("div",{class:"col-md-3 col-lg-4",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),name:"modified_before",type:"date",class:"form-control form-control-sm","aria-label":"modified between","aria-describedby":"modified between"})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputMinimumsize",children:"Minimum size"})}),Object(u.jsx)("div",{class:"col-md-3 col-lg-4",children:Object(u.jsx)("input",{onTouchEnd:this.handleUiHelper.bind(this),onMouseUp:this.handleUiHelper.bind(this),name:"minsizerange",type:"range",min:"0",max:"1024",class:"form-range","aria-label":"minimum size","aria-describedby":"minimum size"})}),Object(u.jsx)("div",{class:"col-md-2 col-lg-2",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),value:this.state.filters.minsize/this.minmultiplier,id:"inputMinimumsize",name:"minsize",type:"text",class:"form-control form-control-sm","aria-label":"minimum size","aria-describedby":"minimum size"})}),Object(u.jsx)("div",{class:"col-md-2 col-lg-2",children:Object(u.jsxs)("select",{class:"form-select form-select-sm",onChange:this.handleUiHelper.bind(this),name:"minmultiplier",children:[Object(u.jsx)("option",{value:"1",children:"B"}),Object(u.jsx)("option",{value:"1024",children:"KB"}),Object(u.jsx)("option",{selected:!0,value:"1048576",children:"MB"}),Object(u.jsx)("option",{value:"1073741824",children:"TB"})]})})]}),Object(u.jsxs)("div",{class:"row mb-3",children:[Object(u.jsx)("div",{class:"col-md-6 col-lg-4 text-lg-end text-md-end",children:Object(u.jsx)("label",{class:"",for:"inputMaximumsize",children:"Maximum size"})}),Object(u.jsx)("div",{class:"col-md-3 col-lg-4",children:Object(u.jsx)("input",{onTouchEnd:this.handleUiHelper.bind(this),onMouseUp:this.handleUiHelper.bind(this),name:"maxsizerange",type:"range",min:"0",max:"1024",class:"form-range","aria-label":"maximum size","aria-describedby":"maximum size"})}),Object(u.jsx)("div",{class:"col-md-2 col-lg-2",children:Object(u.jsx)("input",{onChange:this.handleAdvancedFilterChange.bind(this),value:this.state.filters.maxsize/this.maxmultiplier,id:"inputMaximumsize",name:"maxsize",type:"text",class:"form-control form-control-sm","aria-label":"maximum size","aria-describedby":"maximum size"})}),Object(u.jsx)("div",{class:"col-md-2 col-lg-2",children:Object(u.jsxs)("select",{class:"form-select form-select-sm",onChange:this.handleUiHelper.bind(this),name:"maxmultiplier",children:[Object(u.jsx)("option",{value:"1",children:"B"}),Object(u.jsx)("option",{value:"1024",children:"KB"}),Object(u.jsx)("option",{selected:!0,value:"1048576",children:"MB"}),Object(u.jsx)("option",{value:"1073741824",children:"TB"})]})})]})]})}}]),s}(i.a.Component),R=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(u.jsxs)("div",{class:"px-4 py-5 my-5 text-center",children:[Object(u.jsxs)("h1",{class:"display-6 fw-bold",children:[Object(u.jsx)("span",{class:"badge bg-primary",children:"FH"})," File Hunter"]}),Object(u.jsxs)("div",{class:"col-lg-6 mx-auto",children:[Object(u.jsxs)("p",{class:"lead mb-4",children:["Simple, fast, open source file search engine",Object(u.jsx)("br",{}),Object(u.jsx)("br",{})]}),Object(u.jsx)("div",{class:"d-grid gap-2 d-sm-flex justify-content-sm-center",children:Object(u.jsxs)("a",{href:"/gui/index/create",class:"btn btn-primary btn-lg px-4 gap-3",children:[Object(u.jsx)("i",{class:"bi bi-plus"})," Create new index"]})}),Object(u.jsx)("p",{class:"text-muted fw-lighter",children:"Currently you don't have any indexes, add new one to search the files"})]})]})}}]),s}(i.a.Component),z=(i.a.Component,s(129),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={currentPage:0},a.setCurrentPage=a.setCurrentPage.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.setPagginatorPageState((function(){e.setState({currentPage:0})}))}},{key:"setCurrentPage",value:function(e){e.preventDefault();var t=parseInt(e.target.attributes.page.value);this.props.setPage(t),this.setState({currentPage:t})}},{key:"render",value:function(){var e=0,t=this.state.currentPage+5;this.state.currentPage>4&&(e=this.state.currentPage-3),t>this.props.maxPage&&(t=this.props.maxPage);var s=[];this.state.currentPage>0&&s.push(Object(u.jsx)("li",{class:"page-item",children:Object(u.jsx)("a",{class:"page-link",href:"#",tabindex:"-1",onClick:this.setCurrentPage,"aria-disabled":"true",page:this.state.currentPage-1,children:"Previous"})}));for(var a=e;a<t;a++)a==this.state.currentPage?s.push(Object(u.jsx)("li",{class:"page-item active",children:Object(u.jsx)("a",{class:"page-link shadow-none",href:"#",onClick:this.setCurrentPage,page:a,children:a+1})})):s.push(Object(u.jsx)("li",{class:"page-item",children:Object(u.jsx)("a",{class:"page-link shadow-none",href:"#",onClick:this.setCurrentPage,page:a,children:a+1})}));return this.state.currentPage<this.props.maxPage&&s.push(Object(u.jsx)("li",{class:"page-item",children:Object(u.jsx)("a",{class:"page-link",href:"#",tabindex:"-1",onClick:this.setCurrentPage,"aria-disabled":"true",page:this.state.currentPage+1,children:"Next"})})),Object(u.jsx)("nav",{"aria-label":"Navigation",children:Object(u.jsx)("ul",{class:"pagination justify-content-center",children:s})})}}]),s}(i.a.Component)),M=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={value:null,searchResultRows:[],currentIndex:"-",currentPath:"/",availableIndexes:[],currentBrowseList:[],currentPage:0,perPage:10,maxPage:1},a.filters={},a.currentQuery="",a.handleBrowse=a.handleBrowse.bind(Object(o.a)(a)),a.showItems=a.showItems.bind(Object(o.a)(a)),a.showSearchResult=a.showSearchResult.bind(Object(o.a)(a)),a.refreshIndexList=a.refreshIndexList.bind(Object(o.a)(a)),a.setPageNumber=a.setPageNumber.bind(Object(o.a)(a)),a.clearPagginatorPageNumber=a.clearPagginatorPageNumber.bind(Object(o.a)(a)),a.handleChangeFilters=a.handleChangeFilters.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.refreshIndexList(!0),this.props.setItemRefresh(this.showSearchResult),setInterval((function(){e.refreshIndexList()}),3e4)}},{key:"setPageNumber",value:function(e){this.setState(Object(F.a)(Object(F.a)({},this.state),{},{currentPage:e})),window.scrollTo(0,0)}},{key:"clearPagginatorPageNumber",value:function(){}},{key:"refreshIndexList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];fetch("".concat("","/index/list")).then((function(e){return e.json()})).then((function(s){e.setState(Object(F.a)(Object(F.a)({},e.state),{},{availableIndexes:s})),t&&s.length>0&&e.handleBrowse("/",s[0].name)}))}},{key:"componentWillUnmount",value:function(){}},{key:"presentItems",value:function(e,t){var s=this,a=[],i={};this.state.availableIndexes.forEach((function(e){i[e.name]=e})),e.map((function(e){e.indexstatus=i[e.index],a.push(Object(u.jsx)(D,{params:e,handleBrowse:s.handleBrowse,searchResult:t}))})),0===a.length&&a.push(Object(u.jsx)(I,{})),window.scrollTo(0,0);var n=a.length/this.state.perPage;this.clearPagginatorPageNumber(),this.setState(Object(F.a)(Object(F.a)({},this.state),{},{currentBrowseList:a,maxPage:n,currentPage:0}))}},{key:"showSearchResult",value:function(e){this.currentQuery=e,this.handleSearch()}},{key:"handleChangeFilters",value:function(e){this.filters=e,this.handleSearch()}},{key:"showItems",value:function(e){this.presentItems(e,!1),this.props.setNavbarInputClear()}},{key:"handleBrowse",value:function(e,t){var s=this,a="".concat("","/browse?path=").concat(encodeURIComponent(e),"&index=").concat(encodeURIComponent(t));this.setState(Object(F.a)(Object(F.a)({},this.state),{},{currentIndex:t,currentPath:e})),fetch(a).then((function(e){return e.json()})).then((function(e){s.currentItems=e,s.showItems(e)})).catch((function(e){console.log(e)}))}},{key:"handleSearch",value:function(){var e=this,t=Object.keys(this.filters).map((function(t){return"filter[".concat(t,"]=").concat(e.filters[t])})).join("&"),s="";this.currentQuery.trim().length>0&&(s=this.currentQuery.trim()+"*");var a="".concat("","/search?q=").concat(encodeURIComponent(s),"&").concat(t);this.activeQuery=!0,fetch(a).then((function(e){return e.json()})).then((function(t){e.lastQuery=a,setTimeout((function(){return e.activeQuery=!1}),100),e.presentItems(t,!0),e.setState(Object(F.a)(Object(F.a)({},e.state),{},{currentIndex:"-",currentPath:"/"})),e.setState({})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;if(0==this.state.availableIndexes.length)return Object(u.jsx)(R,{});var t=null;this.state.maxPage>1&&(t=Object(u.jsx)(z,{maxPage:this.state.maxPage,setPage:this.setPageNumber,setPagginatorPageState:function(t){return e.clearPagginatorPageNumber=t}}));var s=Object(u.jsx)("button",{type:"button",class:"btn btn-outline-secondary btn-sm d-inline","data-bs-toggle":"modal","data-bs-target":"#filterSearchResult",children:Object(u.jsx)("i",{class:"bi bi-filter"})});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{class:"container-fluid mt-5",children:[Object(u.jsxs)("div",{class:"row",children:[Object(u.jsx)("div",{class:"col-2 d-none d-lg-block",children:Object(u.jsx)(B,{handleBrowse:this.handleBrowse,availableIndexes:this.state.availableIndexes})}),Object(u.jsxs)("div",{class:"col-lg-10 col-md-12",children:[Object(u.jsxs)("div",{class:"row align-middle",children:[Object(u.jsx)("div",{class:"col-auto me-auto",children:Object(u.jsx)(E,{index:this.state.currentIndex,path:this.state.currentPath,handleBrowse:this.handleBrowse})}),Object(u.jsxs)("div",{class:"col-auto",children:[Object(u.jsx)("a",{href:"#","data-bs-toggle":"offcanvas","data-bs-target":"#indexListDrawer",class:"btn btn-sm btn-outline-secondary d-inline d-lg-none",children:Object(u.jsx)("i",{class:"bi bi-folder2"})}),s]})]}),Object(u.jsx)("div",{class:"list-group list-group-flush",children:this.state.currentBrowseList.slice(this.state.currentPage*this.state.perPage,this.state.currentPage*this.state.perPage+this.state.perPage)}),t]})]}),Object(u.jsxs)("div",{class:"offcanvas offcanvas-end",tabindex:"-1",id:"indexListDrawer","aria-labelledby":"Index list",children:[Object(u.jsxs)("div",{class:"offcanvas-header",children:[Object(u.jsx)("h5",{id:"offcanvasRightLabel"}),Object(u.jsx)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"offcanvas-body",children:Object(u.jsx)(B,{handleBrowse:this.handleBrowse,availableIndexes:this.state.availableIndexes})})]})]},"toastmsg"),Object(u.jsx)("div",{class:"modal fade",id:"filterSearchResult",tabindex:"-1","aria-labelledby":"filterSearchResultLabel","aria-hidden":"true",children:Object(u.jsx)("div",{class:"modal-dialog modal-lg",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",children:[Object(u.jsx)("h5",{class:"modal-title",id:"filterSearchResultLabel",children:"Filter search result"}),Object(u.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(u.jsx)("div",{class:"modal-body",children:Object(u.jsx)(N,{filters:this.filters,update:this.handleChangeFilters})}),Object(u.jsx)("div",{class:"modal-footer",children:Object(u.jsx)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})}}]),s}(i.a.Component),T=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleItemsRefreshFromBrowser=a.handleItemsRefreshFromBrowser.bind(Object(o.a)(a)),a.handleItemRefreshFromNavbar=a.handleItemRefreshFromNavbar.bind(Object(o.a)(a)),a.hadnleClearNavbarInputQuery=a.hadnleClearNavbarInputQuery.bind(Object(o.a)(a)),a.callbackNavbarClearQuery=a.callbackNavbarClearQuery.bind(Object(o.a)(a)),a}return Object(l.a)(s,[{key:"handleItemRefreshFromNavbar",value:function(e){this.handleItemsRefreshFromBrowser(e)}},{key:"handleItemsRefreshFromBrowser",value:function(){}},{key:"hadnleClearNavbarInputQuery",value:function(){this.callbackNavbarClearQuery()}},{key:"callbackNavbarClearQuery",value:function(){}},{key:"render",value:function(){var e=this;return Object(u.jsx)(b.a,{children:Object(u.jsx)(j.d,{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("header",{children:Object(u.jsx)(p,{setCallbackClearInputQuery:function(t){return e.callbackNavbarClearQuery=t},handleItemSearch:this.handleItemRefreshFromNavbar})}),Object(u.jsxs)("main",{class:"flex-shrink-2",children:[Object(u.jsx)(j.b,{exact:!0,path:"/",children:Object(u.jsx)(j.a,{to:"/gui/"})}),Object(u.jsx)(j.b,{exact:!0,path:"/gui/",children:Object(u.jsx)(M,{setNavbarInputClear:this.hadnleClearNavbarInputQuery,setItemRefresh:function(t){return e.handleItemsRefreshFromBrowser=t}})}),Object(u.jsx)(j.b,{exact:!0,path:"/gui/index",children:Object(u.jsx)(O,{})}),Object(u.jsx)(j.b,{path:"/gui/index/edit/:name",children:Object(u.jsx)(P,{})}),Object(u.jsx)(j.b,{path:"/gui/index/create",children:Object(u.jsx)(P,{})})]})]})})})}}]),s}(i.a.Component),L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,281)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),i(e),n(e),r(e)}))};s(277),s(276);r.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root")),L()}},[[278,1,2]]]);
//# sourceMappingURL=main.ee712630.chunk.js.map